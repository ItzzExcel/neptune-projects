var h=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var v=(t,e)=>()=>(t&&(e=t(t=0)),e);var N=(t,e)=>{for(var r in e)h(t,r,{get:e[r],enumerable:!0})},A=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of S(e))!w.call(t,c)&&c!==r&&h(t,c,{get:()=>e[c],enumerable:!(a=I(e,c))||a.enumerable});return t};var R=t=>A(h({},"__esModule",{value:!0}),t);var C={};N(C,{Tracer:()=>y,libTrace:()=>k});import{actions as E}from"@neptune";var y,k,T=v(()=>{"use strict";y=t=>{let e=s=>{let l=(...i)=>{s(t,...i)};return l.withContext=i=>(...f)=>{s(t,i,...f)},l},r=e(console.log),a=e(console.warn),c=e(console.error),o=e(console.debug),n=(s,l,i)=>{let f=m=>{s(m),l({message:`${t} - ${m}`,category:"OTHER",severity:i})};return f.withContext=m=>{let x=s.withContext(m);return u=>{x(u),u instanceof Error&&(u=u.message),l({message:`${t}.${m} - ${u}`,category:"OTHER",severity:i})}},f};return{log:r,warn:a,err:c,debug:o,msg:{log:n(r,E.message.messageInfo,"INFO"),warn:n(a,E.message.messageWarn,"WARN"),err:n(c,E.message.messageError,"ERROR")}}},k=y("[lib]")});T();import{intercept as O}from"@neptune";T();var D=y("[OLED Theme]"),L="https://raw.githubusercontent.com/ItzzExcel/neptune-projects/refs/heads/main/themes/black-neptune-theme.css",b,d;function g(){let t=document.querySelector('[class^="trackTitleContainer"]');t&&t.addEventListener("DOMSubtreeModified",()=>{setTimeout(()=>{p()},300)})}function _(t){let e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e}function q(){d&&d.parentNode&&d.parentNode.removeChild(d)}async function M(t){try{let e=await fetch(t);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.text()}catch(e){return D.msg.err(`Failed to fetch URL: ${e.message}`),null}}(async()=>(b=await M(L),d=_(b)))();var p=function(t=0){t===1&&setTimeout(()=>{p()},2e3);let e=document.querySelector('figure[class*="albumImage"] > div > div > div > img'),r;e&&(r=e.src,r=r.replace(/\d+x\d+/,"1280x1280"),e.src=r);let a=document.querySelector('[class*="nowPlayingContainer"]');if(a&&r){a.querySelectorAll(".corner-image").forEach(s=>s.remove());let o=document.createElement("img");o.src=r,o.className="corner-image",o.style.position="absolute",o.style.left="50%",o.style.top="50%",o.style.transform="translate(-50%, -50%)",o.style.width="75vw",o.style.height="150vh",o.style.objectFit="cover",o.style.zIndex="-1",o.style.filter="blur(100px) brightness(0.6) contrast(1.2) saturate(1)",o.style.animation="spin 35s linear infinite",a.appendChild(o);let n=document.createElement("img");if(n.src=r,n.className="corner-image",n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.transform="translate(-50%, -50%)",n.style.width="75vw",n.style.height="150vh",n.style.objectFit="cover",n.style.zIndex="-1",n.style.filter="blur(100px) brightness(0.6) contrast(1.2) saturate(1)",n.style.animation="spin 35s linear infinite",a.appendChild(n),!document.querySelector("#spinAnimation")){let s=document.createElement("style");s.id="spinAnimation",s.textContent=`
                @keyframes spin {
                    from { transform: translate(-50%, -50%) rotate(0deg); }
                    to { transform: translate(-50%, -50%) rotate(360deg); }
                }
            `,document.head.appendChild(s)}}},P=function(){[...document.getElementsByClassName("corner-image")].forEach(t=>{t.remove()})},U=["playbackControls/PREFILL_MEDIA_PRODUCT_TRANSITION","playbackControls/MEDIA_PRODUCT_TRANSITION"];g();g();g();g();var $=U.map(t=>O(t,()=>{p(1)}));function G(){q(),$.forEach(e=>e()),P();let t=document.querySelector('div[class^="trackTitleContainer"]');t&&t.removeEventListener("DOMSubtreeModified",p)}export{G as onUnload};
