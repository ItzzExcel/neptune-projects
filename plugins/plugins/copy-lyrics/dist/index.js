var p=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var L=(t,e)=>()=>(t&&(e=t(t=0)),e);var O=(t,e)=>{for(var r in e)p(t,r,{get:e[r],enumerable:!0})},R=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of v(e))!A.call(t,o)&&o!==r&&p(t,o,{get:()=>e[o],enumerable:!(i=S(e,o))||i.enumerable});return t};var M=t=>R(p({},"__esModule",{value:!0}),t);var C={};O(C,{Tracer:()=>m,libTrace:()=>_});import{actions as E}from"@neptune";var m,_,h=L(()=>{"use strict";m=t=>{let e=s=>{let n=(...c)=>{s(t,...c)};return n.withContext=c=>(...u)=>{s(t,c,...u)},n},r=e(console.log),i=e(console.warn),o=e(console.error),f=e(console.debug),a=(s,n,c)=>{let u=l=>{s(l),n({message:`${t} - ${l}`,category:"OTHER",severity:c})};return u.withContext=l=>{let T=s.withContext(l);return d=>{T(d),d instanceof Error&&(d=d.message),n({message:`${t}.${l} - ${d}`,category:"OTHER",severity:c})}},u};return{log:r,warn:i,err:o,debug:f,msg:{log:a(r,E.message.messageInfo,"INFO"),warn:a(i,E.message.messageWarn,"WARN"),err:a(o,E.message.messageError,"ERROR")}}},_=m("[lib]")});h();h();var x=m("[Copy Lyrics]"),D=`
[class^="lyricsText"]>div>span {
    user-select: text;
    cursor: text;
}

::selection {
    background: rgb(0, 0, 0);
    color: rgb(255, 255, 255);
}
`;function $(t){let e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e}function b(t){let e=document.createElement("textarea");e.value=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{if(!document.execCommand("copy"))throw new Error("Failed to copy text.")}catch(r){x.msg.err(r)}finally{document.body.removeChild(e)}}var g=$(D),y=!1,w=function(){y=!0},N=function(t){if(y){let e=window.getSelection();if(e.toString().length>0){let r=[],o=e.getRangeAt(0).commonAncestorContainer;if(o.nodeType!==Node.ELEMENT_NODE&&o.nodeType!==Node.DOCUMENT_NODE){let n=o.parentElement;if(n&&n.hasAttribute("data-current")||o.ELEMENT_NODE.hasAttribute("data-current")){let c=e.toString().trim();b(c),x.msg.log("Copied to clipboard!");return}}let f=o.getElementsByTagName("span");for(let n of f)e.containsNode(n,!0)&&r.push(n);let a=!1,s="";r.forEach(n=>{n.hasAttribute("data-current")&&(a=!0,s+=n.textContent+`
`,[...n.classList].some(c=>c.startsWith("endOfStanza--"))&&(s+=`
`))}),a&&console.log(a),s=s.trim(),a===!0&&(b(s),x.msg.log("Copied to clipboard!"),window.getSelection&&e.removeAllRanges())}y=!1}};document.addEventListener("mousedown",w);document.addEventListener("mouseup",N);function F(){g&&g.parentNode&&g.parentNode.removeChild(g),document.removeEventListener("mousedown",w),document.removeEventListener("mouseup",N)}export{F as onUnload};
