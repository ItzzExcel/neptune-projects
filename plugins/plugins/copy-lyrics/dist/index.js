var f=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var L=Object.prototype.hasOwnProperty;var O=(t,e)=>()=>(t&&(e=t(t=0)),e);var R=(t,e)=>{for(var n in e)f(t,n,{get:e[n],enumerable:!0})},A=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of v(e))!L.call(t,r)&&r!==n&&f(t,r,{get:()=>e[r],enumerable:!(i=b(e,r))||i.enumerable});return t};var M=t=>A(f({},"__esModule",{value:!0}),t);var C={};R(C,{Tracer:()=>m,libTrace:()=>_});import{actions as E}from"@neptune";var m,_,x=O(()=>{"use strict";m=t=>{let e=o=>{let c=(...a)=>{o(t,...a)};return c.withContext=a=>(...u)=>{o(t,a,...u)},c},n=e(console.log),i=e(console.warn),r=e(console.error),p=e(console.debug),s=(o,c,a)=>{let u=d=>{o(d),c({message:`${t} - ${d}`,category:"OTHER",severity:a})};return u.withContext=d=>{let T=o.withContext(d);return l=>{T(l),l instanceof Error&&(l=l.message),c({message:`${t}.${d} - ${l}`,category:"OTHER",severity:a})}},u};return{log:n,warn:i,err:r,debug:p,msg:{log:s(n,E.message.messageInfo,"INFO"),warn:s(i,E.message.messageWarn,"WARN"),err:s(r,E.message.messageError,"ERROR")}}},_=m("[lib]")});x();x();var y=m("[Copy Lyrics]"),$=`
[class^="lyricsText"]>div>span {
    user-select: text;
    cursor: text;
}

::selection {
    background: rgb(0, 0, 0);
    color: rgb(255, 255, 255);
}
`;function D(t){let e=document.createElement("style");return e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.head.appendChild(e),e}function w(t){let e=document.createElement("textarea");e.value=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{if(!document.execCommand("copy"))throw new Error("Failed to copy text.")}catch(n){y.msg.err(n)}finally{document.body.removeChild(e)}}var g=D($),h=!1,N=function(){h=!0},S=function(t){if(h){let e=window.getSelection();if(e.toString().length>0){let n=[],r=e.getRangeAt(0).commonAncestorContainer;if(r.nodeType!==Node.ELEMENT_NODE&&r.nodeType!==Node.DOCUMENT_NODE){let o=e.toString().trim();w(o),y.msg.log("Copied to clipboard!");return}let p=r.getElementsByTagName("span");for(let o of p)e.containsNode(o,!0)&&n.push(o);let s="";n.forEach(o=>{s+=o.textContent+`
`,[...o.classList].some(c=>c.startsWith("endOfStanza--"))&&(s+=`
`)}),s=s.trim(),w(s),y.msg.log("Copied to clipboard!"),window.getSelection&&e.removeAllRanges()}h=!1}};document.addEventListener("mousedown",N);document.addEventListener("mouseup",S);function F(){g&&g.parentNode&&g.parentNode.removeChild(g),document.removeEventListener("mousedown",N),document.removeEventListener("mouseup",S)}export{F as onUnload};
